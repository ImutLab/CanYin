<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.css">
<script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
<script src="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.js"></script>
<script type="text/javascript" src="js/template.js"></script>
<title>开台操作</title>
<style type="text/css">
.ui-block-a, 
.ui-block-b, 
.ui-block-c 
{
background-color: lightgray;
border: 1px solid black;
height: 100px;
font-weight: bold;
text-align: center;
padding: 1px;
}
.content_left{
	float: left;
	width: 24%;
}
.content_right{
	float: right;
	width: 75%;
	height:100%;
	background: white;
}
.ui-icon-buy {
	background:url('/images/gwc.png') no-repeat 0 0;
	width: 29px;
	height:27px;
}
</style>

<script type="text/html" id="template_left">
    {{each list as value i}}
        <label for="{{cnd}}{{i}}"> {{value.charvalue}} </label>
        <input type="checkbox" id="{{cnd}}{{i}}" name="{{cnd}}" value="{{value.charvalue}}" onclick="readtable()">
    {{/each}}
</script>
<script type="text/html" id="template_right">
    <ul data-role="listview" data-inset="false">
        {{each list as value i}}
        <li>
            <a href="#">
                <img src="images/tbimage_{{value.type}}.png" width=75 height=75>
                <h1>{{value.tablename}}</h1>
                 <p>{{value.starttime}}</p>
            </a>
        </li>
        {{/each}}
    </ul>
</script>
</head>
<body>
<div data-role="page" data-position="fixed" id="page1">
    <div data-theme="b" data-role="header">
    <a data-icon="home" data-iconpos="left" >店名:长春小巷食府</a>
    <h1></h1>
    <a data-icon="buy" data-iconpos="notext" data-corners="false" data=shadow="false"> 2 </a>
</div>
    <div class="content_left">
         <form method="post" action="gettables.do">
             <fieldset data-role="controlgroup" id="tablepos">
             </fieldset>
         </form>
	</div>
	<div class="content_right" id="showtables">


	</div>
</div>
</body>

<script type="text/javascript">
$(function(){
    $.getJSON("gettablepos.do",function(json){
        var tablecnd={
            cnd:"pos",
            list:json
        };
        var html=template("template_left",tablecnd);
        $("#tablepos").append(html);
        $("#tablepos").trigger("create");
	});

    $.getJSON("gettabletype.do",function(json){
        var tablecnd={
            cnd:"type",
            list:json
        };
        var html=template("template_left",tablecnd);
        $("#tablepos").append(html);
        $("#tablepos").trigger("create");
	});

});
function readtable(){

    var formparam=$("form").serialize();
    $.post("gettables.do",formparam,function(json){
        var tabledata={
            list:json
        }
        var html=template("template_right",tabledata);
        $("#showtables").html(html);
        $("#showtables ul").listview();
    },"json");
}
</script>



</html>